parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"HKMW":[function(require,module,exports) {
var e,t=(e=require("queue-microtask"))&&"object"==typeof e&&"default"in e?e.default:e,r=require("@onflow/sdk"),n=require("@onflow/types");const o=function(){function e(){}return e.prototype.then=function(t,r){const n=new e,o=this.s;if(o){const u=1&o?t:r;if(u){try{i(n,1,u(this.v))}catch(e){i(n,2,e)}return n}return this}return this.o=function(e){try{const o=e.v;1&e.s?i(n,1,t?t(o):o):r?i(n,1,r(o)):i(n,2,o)}catch(e){i(n,2,e)}},n},e}();function i(e,t,r){if(!e.s){if(r instanceof o){if(!r.s)return void(r.o=i.bind(null,e,t));1&t&&(t=r.s),r=r.v}if(r&&r.then)return void r.then(i.bind(null,e,t),i.bind(null,e,2));e.s=t,e.v=r;const n=e.o;n&&n(e)}}function u(e){return e instanceof o&&1&e.s}function c(e,t,r){for(var n;;){var c=e();if(u(c)&&(c=c.v),!c)return s;if(c.then){n=0;break}var s=r();if(s&&s.then){if(!u(s)){n=1;break}s=s.s}if(t){var a=t();if(a&&a.then&&!u(a)){n=2;break}}}var l=new o,f=i.bind(null,l,2);return(0===n?c.then(m):1===n?s.then(d):a.then(h)).then(void 0,f),l;function d(n){s=n;do{if(t&&(a=t())&&a.then&&!u(a))return void a.then(h).then(void 0,f);if(!(c=e())||u(c)&&!c.v)return void i(l,1,s);if(c.then)return void c.then(m).then(void 0,f);u(s=r())&&(s=s.v)}while(!s||!s.then);s.then(d).then(void 0,f)}function m(e){e?(s=r())&&s.then?s.then(d).then(void 0,f):d(s):i(l,1,s)}function h(){(c=e())?c.then?c.then(m).then(void 0,f):m(c):i(l,1,s)}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var l="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||"object"==typeof window&&window.window===window&&window;l.FCL_REGISTRY=null==l.FCL_REGISTRY?{}:l.FCL_REGISTRY;var f,d=0,m=function(e,t,r,n){return void 0===n&&(n={}),new Promise(function(o,i){var u=n.expectReply||!1,c=null!=n.timeout?n.timeout:5e3;u&&c&&setTimeout(function(){return i(new Error("Timeout: "+c+"ms passed without a response."))},c);var s={to:e,from:n.from,tag:t,data:r,timeout:c,reply:o,reject:i};try{l.FCL_REGISTRY[e].mailbox.deliver(s),u||o(!0)}catch(e){console.error("FCL.Actor -- Could Not Deliver Message",s,e)}})},h=function(e,r){if(void 0===r&&(r=null),null==r&&(r=++d),null!=l.FCL_REGISTRY[r])return r;var n,o;l.FCL_REGISTRY[r]={addr:r,mailbox:(o=[],{deliver:function(e){try{return o.push(e),n&&(n(o.shift()),n=void 0),Promise.resolve()}catch(e){return Promise.reject(e)}},receive:function(){return new Promise(function(e){var t=o.shift();if(t)return e(t);n=e})}}),subs:new Set,kvs:{}};var i,u={self:function(){return r},receive:function(){return l.FCL_REGISTRY[r].mailbox.receive()},send:function(e,t,n,o){return void 0===o&&(o={}),o.from=r,m(e,t,n,o)},broadcast:function(e,t,n){void 0===n&&(n={}),n.from=r;for(var o,i=function(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,void 0):void 0}}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}(l.FCL_REGISTRY[r].subs);!(o=i()).done;)m(o.value,e,t,n)},subscribe:function(e){return null!=e&&l.FCL_REGISTRY[r].subs.add(e)},unsubscribe:function(e){return null!=e&&l.FCL_REGISTRY[r].subs.delete(e)},put:function(e,t){null!=e&&(l.FCL_REGISTRY[r].kvs[e]=t)},get:function(e,t){var n=l.FCL_REGISTRY[r].kvs[e];return null==n?t:n},delete:function(e){delete l.FCL_REGISTRY[r].kvs[e]},update:function(e,t){null!=e&&(l.FCL_REGISTRY[r].kvs[e]=t(l.FCL_REGISTRY[r].kvs[e]))},keys:function(){return Object.keys(l.FCL_REGISTRY[r].kvs)},all:function(){return l.FCL_REGISTRY[r].kvs},where:function(e){return Object.keys(l.FCL_REGISTRY[r].kvs).reduce(function(t,n){var o;return e.test(n)?s({},t,((o={})[n]=l.FCL_REGISTRY[r].kvs[n],o)):t},{})},merge:function(e){void 0===e&&(e={}),Object.keys(e).forEach(function(t){return l.FCL_REGISTRY[r].kvs[t]=e[t]})}};return"object"==typeof e&&(void 0===(i=e)&&(i={}),e=function(e){try{var t=function(){var t=c(function(){return 1},void 0,function(){return Promise.resolve(e.receive()).then(function(t){var r=function(r,n){try{var o=function(r,n){try{var o=function(){function r(){return Promise.resolve(i[t.tag](e,t,t.data||{})).then(function(){})}var n=function(){if("EXIT"===t.tag){var r=function(){if("function"==typeof i.TERMINATE)return Promise.resolve(i.TERMINATE(e,t,t.data||{})).then(function(){})}();if(r&&r.then)return r.then(function(){})}}();return n&&n.then?n.then(r):r()}()}catch(e){return n(e)}return o&&o.then?o.then(void 0,n):o}(0,function(r){console.error(e.self()+" Error",t,r)})}catch(e){return}return o&&o.then?o.then(n.bind(null,!1),n.bind(null,!0)):void 0}(0,function(e,t){});if(r&&r.then)return r.then(function(){})})});return t&&t.then?t.then(function(){}):void 0},r=function(){if("function"==typeof i.INIT)return Promise.resolve(i.INIT(e)).then(function(){})}();return Promise.resolve(r&&r.then?r.then(t):t())}catch(e){return Promise.reject(e)}}),t(function(){try{return Promise.resolve(e(u)).then(function(){var e;e=r,delete l.FCL_REGISTRY[e]})}catch(e){return Promise.reject(e)}}),r},v="config",p="PUT_CONFIG",y="GET_CONFIG",b="CONFIG/UPDATED",P=function(e){return e},g=((f={})[p]=function(e,t,r){var n=r.key,o=r.value;if(null==n)throw new Error("Missing 'key' for config/put.");e.put(n,o),e.broadcast(b,e.all())},f[y]=function(e,t,r){var n=r.key,o=r.fallback;if(null==n)throw new Error("Missing 'key' for config/get");t.reply(e.get(n,o))},f.UPDATE_CONFIG=function(e,t,r){var n=r.key,o=r.fn;if(null==n)throw new Error("Missing 'key' for config/update");e.update(n,o||P),e.broadcast(b,e.all())},f.DELETE_CONFIG=function(e,t,r){var n=r.key;if(null==n)throw new Error("Missing 'key' for config/delete");e.delete(n),e.broadcast(b,e.all())},f.WHERE_CONFIG=function(e,t,r){var n=r.pattern;if(null==n)throw new Error("Missing 'pattern' for config/where");t.reply(e.where(n))},f.SUBSCRIBE=function(e,t){e.subscribe(t.from),e.send(t.from,b,e.all())},f.UNSUBSCRIBE=function(e,t){e.unsubscribe(t.from)},f);function E(e,t){return m(v,p,{key:e,value:t}),w()}function S(e,t){return m(v,y,{key:e,fallback:t},{expectReply:!0,timeout:10})}function R(e,t){return void 0===t&&(t=P),m(v,"UPDATE_CONFIG",{key:e,fn:t}),w()}function I(e){return m(v,"DELETE_CONFIG",{key:e}),w()}function T(e){return m(v,"WHERE_CONFIG",{pattern:e},{expectReply:!0,timeout:10})}function j(e){var t=h(function(t){try{var r=!1;return t.send(v,"SUBSCRIBE"),Promise.resolve(c(function(){return!r&&1},void 0,function(){return Promise.resolve(t.receive()).then(function(n){if("@EXIT"===n.tag)return t.send(v,"UNSUBSCRIBE"),void(r=!0);e(n.data)})}))}catch(e){return Promise.reject(e)}});return function(){return m(t,"@EXIT")}}function w(){return{put:E,get:S,update:R,delete:I,where:T,subscribe:j}}h(g,v),w().put("accessNode.api","http://localhost:8080").put("challenge.handshake","http://localhost:8700/authenticate");var O,x=function(e){try{return Promise.resolve(r.resolve(e,[r.resolveParams,r.resolveAccounts,r.resolveSignatures]))}catch(e){return Promise.reject(e)}},C=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});try{var n=function(n){return t.node=n,Array.isArray(e)&&(e=r.build(e)),Promise.resolve(x(e)).then(function(e){return r.send(e,t)})},o=t.node;return Promise.resolve(o?n(o):Promise.resolve(w().get("accessNode.api")).then(n))}catch(e){return Promise.reject(e)}},k=function(e){try{return Promise.resolve(w().where(/^decoder\./)).then(function(t){var n=Object.fromEntries(Object.entries(t).map(function(e){var t=e[0],r=e[1];return[t="/"+t.replace(/^decoder\./,"")+"$/",r]}));return r.decodeResponse(e,n)})}catch(e){return Promise.reject(e)}},L=function(e){try{return Promise.resolve(C([r.getTransactionStatus(e)])).then(k)}catch(e){return Promise.reject(e)}},N=function(e){return 4===e.status},A=((O={}).INIT=function(e){try{return Promise.resolve(L(e.self())).then(function(t){N(t)||setTimeout(function(){return m(e.self(),"POLL")},1e3),e.merge(t)})}catch(e){return Promise.reject(e)}},O.SUBSCRIBE=function(e,t){e.subscribe(t.from),e.send(t.from,"TRANSACTION/UPDATED",e.all())},O.UNSUBSCRIBE=function(e,t){e.unsubscribe(t.from)},O.SNAPSHOT=function(e,t){try{return t.replay(e.all()),Promise.resolve()}catch(e){return Promise.reject(e)}},O.POLL=function(e){try{return Promise.resolve(L(e.self())).then(function(t){N(t)||setTimeout(function(){return m(e.self(),"POLL")},1e3),e.merge(t),e.broadcast("TRANSACTION/UPDATED",e.all())})}catch(e){return Promise.reject(e)}},O),U=function(e){if("object"==typeof e&&(e=e.transactionId),null==e)throw new Error("transactionId required");return h(A,e)};function _(e){function t(t){var r=U(e),n=h(function(e){try{var n=!1;return e.send(r,"SUBSCRIBE"),Promise.resolve(c(function(){return!n&&1},void 0,function(){return Promise.resolve(e.receive()).then(function(o){if("@EXIT"===o.tag)return e.send(r,"UNSUBSCRIBE"),void(n=!0);t(o.data)})}))}catch(e){return Promise.reject(e)}});return function(){return m(n,"@EXIT")}}return{snapshot:function(){var t=U(e);return m(t,"SNAPSHOT",null,{expectReply:!0,timeout:10})},subscribe:t,onceSealed:function(){return new Promise(function(e){var r=t(function(t){N(t)&&(e(t),r())})})}}}_.isSealed=N;var F,G="FCL_IFRAME_CHALLENGE",B="FCL_IFRAME_AUTHZ",Y=function(e){void 0===e&&(e={});var t=e.addr,r=e.pid;return null==t||null==r?null:t+"/"+r},D={"HTTP/POST":"POST","HTTP/GET":"GET"},H=function(e,t){try{for(var r=new URL(e.endpoint),n=0,o=Object.entries(e.params||{});n<o.length;n++){var i=o[n];r.searchParams.append(i[0],i[1])}return t=t?JSON.stringify(t):void 0,Promise.resolve(fetch(r,{method:D[e.method],headers:{"Content-Type":"application/json"},body:t}).then(function(e){return e.json()}))}catch(e){return Promise.reject(e)}},M=function(){try{return K(),Promise.resolve(re()).then(function(e){var t=e.addr;if(null==t)throw new Error("No Flow Address for Current User");return Promise.resolve(C([r.getAccount(t)])).then(function(e){return e.account})})}catch(e){return Promise.reject(e)}},z=function(e){try{return K(),Promise.resolve(X()).then(function(){return Promise.resolve(re()).then(function(t){function r(){return s({},e,{addr:t.addr,keyId:t.keyId,sequenceNum:n,signature:e.signature||null,signingFunction:function(e){try{return Promise.resolve(re()).then(function(t){return Promise.resolve(M()).then(function(r){return Promise.resolve(H(t.authorizations[0],e)).then(function(e){var t=function(){};return e.local&&e.local.length>0&&(console.log("RENDER LOCAL"),t=function(e){if(!document.getElementById(B)){for(var t=new URL(e.endpoint),r=0,n=Object.entries(e.params||{});r<n.length;r++){var o=n[r];t.searchParams.append(o[0],o[1])}var i=document.createElement("iframe");return i.src=t.href,i.id=B,i.style.height=e.height||"500px",i.style.maxHeight="90vh",i.style.width=e.width||"400px",i.style.maxWidth="90vw",i.style.display="block",i.style.background=e.background||"#fff",i.style.position="fixed",i.style.top="5vh",i.style.right="calc(50vw)",i.style.transform="translateX(50%)",i.style.boxShadow="0 4px 8px -4px black",i.frameBorder="0",document.body.append(i),function(){document.getElementById(B)&&document.getElementById(B).remove()}}}(e.local[0])),Promise.resolve(function e(t){return new Promise(function(r,n){try{return Promise.resolve(H(t)).then(function(t){"APPROVED"===t.status?r(t.compositeSignature):"DECLINED"===t.status?n({status:t.status,reason:t.reason}):setTimeout(function(){r(e(t.authorizationUpdates))},500)})}catch(e){return Promise.reject(e)}})}(e.authorizationUpdates)).then(function(e){return t(),e})})})})}catch(e){return Promise.reject(e)}},resolve:null,roles:e.roles})}var n,o=function(){if(e.role.proposer)return Promise.resolve(M()).then(function(e){var r=e.keys.find(function(e){return e.index===t.keyId});n=r.sequenceNumber})}();return o&&o.then?o.then(r):r()})})}catch(e){return Promise.reject(e)}},X=function(){try{return Promise.resolve(new Promise(function(e){try{return K(),Promise.resolve(re()).then(function(t){return t.loggedIn?e(t):Promise.resolve(w().get("challenge.handshake")).then(function(t){return Promise.resolve(w().get("challenge.scope")).then(function(r){var n=function(e){var t=e.handshake,r=e.scope,n=e.nonce,o=e.l6n;if(!document.getElementById(G)){var i=new URL(t);i.searchParams.append("l6n",o),i.searchParams.append("nonce",n),r&&i.searchParams.append("scope",r.split(" ").join("+"));var u=document.createElement("iframe");return u.src=i.href,u.id=G,u.style.height="500px",u.style.maxHeight="90vh",u.style.width="400px",u.style.maxWidth="90vw",u.style.display="block",u.style.background="#fff",u.style.position="fixed",u.style.top="5vh",u.style.right="calc(50vw)",u.style.transform="translateX(50%)",u.style.boxShadow="0 4px 8px -4px black",u.frameBorder="0",document.body.append(u),function(){document.getElementById(G)&&document.getElementById(G).remove()}}}({handshake:t,scope:r,nonce:"asdf",l6n:window.location.origin});window.addEventListener("message",function(t){var r=t.data;try{if(r.type!==$)return Promise.resolve();n();var o=new URL(r.hks);return o.searchParams.append("code",r.code),Promise.resolve(fetch(o,{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()})).then(function(t){return m(q,W,s({},t,{cid:Y(t.provider),loggedIn:!0,verified:!0})),Promise.resolve(re()).then(function(t){e(t)})})}catch(e){return Promise.reject(e)}})})})})}catch(e){return Promise.reject(e)}}))}catch(e){return Promise.reject(e)}},q="CURRENT_USER",J="CURRENT_USER/UPDATED",W="SET_CURRENT_USER",$="FCL::CHALLENGE::RESPONSE",V='{\n  "cid":null,\n  "loggedIn":null,\n  "verified":null,\n  "identity":{\n    "name":null,\n    "addr":null,\n    "avatar":null,\n    "cover":null,\n    "color":null,\n    "bio":null\n  },\n  "scoped":{},\n  "provider":{\n    "addr":null,\n    "pid":null,\n    "name":null,\n    "icon":null\n  },\n  "authorizations":[]\n}',Z=((F={}).INIT=function(e){e.merge(JSON.parse(V))},F.SUBSCRIBE=function(e,t){e.subscribe(t.from),e.send(t.from,J,e.all())},F.UNSUBSCRIBE=function(e,t){e.unsubscribe(t.from)},F.SNAPSHOT=function(e,t){try{return t.reply(e.all()),Promise.resolve()}catch(e){return Promise.reject(e)}},F[W]=function(e,t,r){try{return e.merge(r),e.broadcast(J,e.all()),Promise.resolve()}catch(e){return Promise.reject(e)}},F.DEL_CURRENT_USER=function(e,t){try{return e.merge(JSON.parse(V)),e.broadcast(J,e.all()),Promise.resolve()}catch(e){return Promise.reject(e)}},F.GET_AS_PARAM=function(e,t,r){var o=r.key;try{return t.reply({key:o,value:e.get("addr",null),xform:n.Identity}),Promise.resolve()}catch(e){return Promise.reject(e)}},F),K=function(){return h(Z,q)};function Q(){K(),m(q,"DEL_CURRENT_USER")}function ee(e){return function(){try{return K(),Promise.resolve(X()).then(function(){return m(q,"GET_AS_PARAM",{key:e},{expectReply:!0,timeout:10})})}catch(e){return Promise.reject(e)}}}function te(e){K();var t=h(function(t){try{var r=!1;return t.send(q,"SUBSCRIBE"),Promise.resolve(c(function(){return!r&&1},void 0,function(){return Promise.resolve(t.receive()).then(function(n){if("@EXIT"===n.tag)return t.send(q,"UNSUBSCRIBE"),void(r=!0);e(n.data)})}))}catch(e){return Promise.reject(e)}});return function(){return m(t,"@EXIT")}}function re(){return K(),m(q,"SNAPSHOT",null,{expectReply:!0,timeout:0})}var ne=function(){return{authenticate:X,unauthenticate:Q,authorization:z,param:ee,subscribe:te,snapshot:re}};Object.defineProperty(exports,"authorization",{enumerable:!0,get:function(){return r.authorization}}),Object.defineProperty(exports,"authorizations",{enumerable:!0,get:function(){return r.authorizations}}),Object.defineProperty(exports,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(exports,"cadence",{enumerable:!0,get:function(){return r.cadence}}),Object.defineProperty(exports,"cdc",{enumerable:!0,get:function(){return r.cdc}}),Object.defineProperty(exports,"getAccount",{enumerable:!0,get:function(){return r.getAccount}}),Object.defineProperty(exports,"getEvents",{enumerable:!0,get:function(){return r.getEvents}}),Object.defineProperty(exports,"getLatestBlock",{enumerable:!0,get:function(){return r.getLatestBlock}}),Object.defineProperty(exports,"getTransactionStatus",{enumerable:!0,get:function(){return r.getTransactionStatus}}),Object.defineProperty(exports,"isBad",{enumerable:!0,get:function(){return r.isBad}}),Object.defineProperty(exports,"isOk",{enumerable:!0,get:function(){return r.isOk}}),Object.defineProperty(exports,"limit",{enumerable:!0,get:function(){return r.limit}}),Object.defineProperty(exports,"param",{enumerable:!0,get:function(){return r.param}}),Object.defineProperty(exports,"params",{enumerable:!0,get:function(){return r.params}}),Object.defineProperty(exports,"payer",{enumerable:!0,get:function(){return r.payer}}),Object.defineProperty(exports,"ping",{enumerable:!0,get:function(){return r.ping}}),Object.defineProperty(exports,"pipe",{enumerable:!0,get:function(){return r.pipe}}),Object.defineProperty(exports,"proposer",{enumerable:!0,get:function(){return r.proposer}}),Object.defineProperty(exports,"ref",{enumerable:!0,get:function(){return r.ref}}),Object.defineProperty(exports,"script",{enumerable:!0,get:function(){return r.script}}),Object.defineProperty(exports,"transaction",{enumerable:!0,get:function(){return r.transaction}}),Object.defineProperty(exports,"why",{enumerable:!0,get:function(){return r.why}}),exports.authenticate=function(){return ne().authenticate()},exports.config=w,exports.currentUser=ne,exports.decode=k,exports.resolve=x,exports.send=C,exports.serialize=function(e){void 0===e&&(e=[]);try{var t=function(){return Promise.resolve(x(e)).then(JSON.stringify)},n=function(){if(Array.isArray(e))return Promise.resolve(r.build(e)).then(function(t){e=t})}();return Promise.resolve(n&&n.then?n.then(t):t())}catch(e){return Promise.reject(e)}},exports.tx=_,exports.unauthenticate=function(){return ne().unauthenticate()};
},{}]},{},["HKMW"], null)
//# sourceMappingURL=/fcl.js.map